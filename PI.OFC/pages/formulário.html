<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <link rel="icon" type="image/png" href="../img_logos/Logo Aqua Limpa.png" />
    <title>Sistema Hidrológico - Formulário de Compra</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        .product-card:hover {
            transform: translateY(-5px);
            box-shadow: 0 10px 20px rgba(0,0,0,0.1);
        }
        .tab-content {
            display: none;
            animation: fadeIn 0.3s ease-in-out;
        }
        .tab-content.active {
            display: block;
        }
        @keyframes fadeIn {
            from { opacity: 0; }
            to { opacity: 1; }
        }
        #checkout-form {
            animation: slideIn 0.5s ease-out;
        }
        @keyframes slideIn {
            from { transform: translateX(50px); opacity: 0; }
            to { transform: translateX(0); opacity: 1; }
        }
    </style>
</head>
<body class="bg-gray-50">
    <div class="container mx-auto px-4 py-8 max-w-6xl">
        <header class="mb-8">
            <div class="flex items-center justify-between">
                <div class="flex items-center">
                    <a href="produtos.html">
                    <img src="../img_logos/Logo Aqua Limpa.png" alt="Logotipo AquaTech - gota d'água azul com circuitos integrados" class="mr-3"/>
                    </a>
                    <h1 class="text-3xl font-bold text-blue-800">Aqua Limpa</h1>
                </div>
                <div class="text-right">
                    <p class="text-sm text-gray-600">Sistema de Reutilização de Água</p>
                    <p class="font-semibold text-blue-700">v3.2.1</p>
                </div>
            </div>
            <div class="border-t-2 border-blue-200 mt-4 pt-4">
                <h2 class="text-2xl font-semibold text-gray-800">Formulário de Compra</h2>
                <p class="text-gray-600">Complete seu pedido em 3 etapas simples</p>
            </div>
        </header>

        <!-- Aqui começa o form -->
        <form method="POST" action="../backend/processar_compra.php" id="checkout-form">
        <div class="flex flex-col md:flex-row gap-8">
            <div class="md:w-2/3">
                <div class="bg-white rounded-lg shadow-md p-6 mb-6">
                    <div class="flex border-b border-gray-200">
                        <button type="button" class="px-4 py-2 font-medium text-blue-600 border-b-2 border-blue-600" onclick="openTab('products')">
                            Produtos
                        </button>
                        <button type="button" class="px-4 py-2 font-medium text-gray-500 hover:text-blue-600" onclick="openTab('shipping')">
                            Entrega
                        </button>
                        <button type="button" class="px-4 py-2 font-medium text-gray-500 hover:text-blue-600" onclick="openTab('payment')">
                            Pagamento
                        </button>
                    </div>

                    <div id="products" class="tab-content active pt-4">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Selecione seus produtos</h3>
                        
                        <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4">
                            <div class="product-card bg-white border border-gray-200 rounded-lg overflow-hidden transition-all duration-300">
                                <div class="product-image h-40 overflow-hidden">
                                    <img src="../produtos/Medidor de Qualidade da Água.png" alt="Medidor de Parâmetro digital com display LCD e sensores múltiplos para análise de água" class="w-full h-full object-cover"/>
                                </div>
                                <div class="p-4">
                                    <h4 class="font-bold text-lg mb-2">Medidor de Parâmetro AP-3000</h4>
                                    <p class="text-gray-600 text-sm mb-3">Precisão de 0.01 pH, mede 12 parâmetros simultâneos</p>
                                    <div class="flex justify-between items-center">
                                        <span class="font-bold text-blue-600">R$ 70,00</span>
                                        <div class="flex items-center">
                                            <button type="button" class="bg-blue-600 text-white px-2 rounded" onclick="updateQuantity('medidor', -1)">-</button>
                                            <input id="medidor-quantity" name="medidor" type="number" value="0" min="0" class="w-12 text-center mx-2 border border-gray-300 rounded" />
                                            <button type="button" class="bg-blue-600 text-white px-2 rounded" onclick="updateQuantity('medidor', 1)">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="product-card bg-white border border-gray-200 rounded-lg overflow-hidden transition-all duration-300">
                                <div class="product-image h-40 overflow-hidden">
                                    <img src="../produtos/Sensor de Água.png" alt="Sensor de vazamento industrial com caixa de proteção IP68 e LEDs indicadores" class="w-full h-full object-cover"/>
                                </div>
                                <div class="p-4">
                                    <h4 class="font-bold text-lg mb-2">Sensor de Vazamento SV-500</h4>
                                    <p class="text-gray-600 text-sm mb-3">Detecção instantânea de vazamentos com alarme sonoro</p>
                                    <div class="flex justify-between items-center">
                                        <span class="font-bold text-blue-600">R$ 90,00</span>
                                        <div class="flex items-center">
                                            <button type="button" class="bg-blue-600 text-white px-2 rounded" onclick="updateQuantity('sensor', -1)">-</button>
                                            <input id="sensor-quantity" name="sensor" type="number" value="0" min="0" class="w-12 text-center mx-2 border border-gray-300 rounded" />
                                            <button type="button" class="bg-blue-600 text-white px-2 rounded" onclick="updateQuantity('sensor', 1)">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="product-card bg-white border border-gray-200 rounded-lg overflow-hidden transition-all duration-300">
                                <div class="product-image h-40 overflow-hidden">
                                    <img src="../produtos/Filtrador de Torneira.png" alt="Filtrador de água industrial com corpo em aço inoxidável e indicador de vida útil" class="w-full h-full object-cover"/>
                                </div>
                                <div class="p-4">
                                    <h4 class="font-bold text-lg mb-2">Filtrador de Água FA-700G</h4>
                                    <p class="text-gray-600 text-sm mb-3">Capacidade de 700L/hora, filtra partículas até 5 micrômetros</p>
                                    <div class="flex justify-between items-center">
                                        <span class="font-bold text-blue-600">R$ 80,00</span>
                                        <div class="flex items-center">
                                            <button type="button" class="bg-blue-600 text-white px-2 rounded" onclick="updateQuantity('filtro', -1)">-</button>
                                            <input id="filtro-quantity" name="filtro" type="number" value="0" min="0" class="w-12 text-center mx-2 border border-gray-300 rounded" />
                                            <button type="button" class="bg-blue-600 text-white px-2 rounded" onclick="updateQuantity('filtro', 1)">+</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>

                    <div id="shipping" class="tab-content pt-4">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Dados de Entrega</h3>
                        <div class="space-y-4">
                            <div class="grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 mb-1" for="cep">CEP</label>
                                    <input id="cep" name="cep" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="00000-000" />
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-1" for="estado">Estado</label>
                                    <select id="estado" name="estado" class="w-full px-3 py-2 border border-gray-300 rounded-md">
                                        <option value="">Selecione...</option>
                                        <option>AL</option>
                                        <option>BA</option>
                                        <option>CE</option>
                                        <option>MA</option>
                                        <option>PB</option>
                                        <option>PE</option>
                                        <option>PI</option>
                                        <option>RN</option>
                                        <option>SE</option>
                                    </select>
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-1" for="endereco">Endereço</label>
                                <input id="endereco" name="endereco" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Rua, número" />
                            </div>
                            <div class="grid grid-cols-1 md:grid-cols-3 gap-4">
                                <div>
                                    <label class="block text-gray-700 mb-1" for="complemento">Complemento</label>
                                    <input id="complemento" name="complemento" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="Apto, bloco" />
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-1" for="bairro">Bairro</label>
                                    <input id="bairro" name="bairro" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" />
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-1" for="cidade">Cidade</label>
                                    <input id="cidade" name="cidade" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" />
                                </div>
                            </div>
                            <div>
                                <label class="block text-gray-700 mb-1" for="telefone">Telefone para contato</label>
                                <input id="telefone" name="telefone" type="tel" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="(00) 00000-0000" />
                            </div>
                        </div>
                    </div>

                    <div id="payment" class="tab-content pt-4">
                        <h3 class="text-xl font-semibold mb-4 text-gray-800">Método de Pagamento</h3>
                        <div class="space-y-4">
                            <div class="flex items-center space-x-3">
                                <input type="radio" id="credit-card" name="pagamento" value="cartao" checked class="h-4 w-4 text-blue-600" />
                                <label for="credit-card" class="font-medium">Cartão de Crédito</label>
                            </div>
                            <div class="pl-7 grid grid-cols-1 md:grid-cols-2 gap-4">
                                <div>
                                    <label class="block text-gray-700 mb-1" for="numero-cartao">Número do Cartão</label>
                                    <input id="numero-cartao" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="0000 0000 0000 0000" />
                                </div>
                                <div>
                                    <label class="block text-gray-700 mb-1" for="nome-cartao">Nome no Cartão</label>
                                    <input id="nome-cartao" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" />
                                </div>
                                <div class="grid grid-cols-2 gap-4">
                                    <div>
                                        <label class="block text-gray-700 mb-1" for="validade">Validade</label>
                                        <input id="validade" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="MM/AA" />
                                    </div>
                                    <div>
                                        <label class="block text-gray-700 mb-1" for="cvv">CVV</label>
                                        <input id="cvv" type="text" class="w-full px-3 py-2 border border-gray-300 rounded-md" placeholder="000" />
                                    </div>
                                </div>
                            </div>
                            <div class="flex items-center space-x-3 mt-4">
                                <input type="radio" id="boleto" name="pagamento" value="boleto" class="h-4 w-4 text-blue-600" />
                                <label for="boleto" class="font-medium">Boleto Bancário</label>
                            </div>
                            <div class="flex items-center space-x-3">
                                <input type="radio" id="pix" name="pagamento" value="pix" class="h-4 w-4 text-blue-600" />
                                <label for="pix" class="font-medium">PIX</label>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="bg-white rounded-lg shadow-md p-6">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Observações</h3>
                    <textarea name="observacoes" class="w-full px-3 py-2 border border-gray-300 rounded-md h-24" placeholder="Alguma observação especial sobre seu pedido?"></textarea>
                </div>
            </div>

            <div class="md:w-1/3">
                <div class="bg-white rounded-lg shadow-md p-6 sticky top-4">
                    <h3 class="text-xl font-semibold mb-4 text-gray-800">Resumo do Pedido</h3>
                    <div class="space-y-3 mb-6" id="order-summary">
                        <div class="text-gray-600 italic">Selecione produtos para ver o resumo</div>
                    </div>
                    <div class="border-t border-gray-200 pt-3 mb-4">
                        <div class="flex justify-between mb-2">
                            <span class="text-gray-600">Subtotal</span>
                            <span class="font-medium" id="subtotal">R$ 0,00</span>
                        </div>
                        <div class="flex justify-between mb-2">
                            <span class="text-gray-600">Frete</span>
                            <span class="font-medium">A calcular</span>
                        </div>
                        <div class="flex justify-between mb-2">
                            <span class="text-gray-600">Desconto</span>
                            <span class="font-medium text-green-600">R$ 0,00</span>
                        </div>
                    </div>
                    <div class="border-t border-gray-200 pt-3 mb-6">
                        <div class="flex justify-between text-lg font-bold">
                            <span>Total</span>
                            <span id="total">R$ 0,00</span>
                        </div>
                    </div>
                    <button type="submit" class="w-full bg-blue-600 hover:bg-blue-700 text-white font-bold py-3 px-4 rounded-md transition duration-300">
                        Finalizar Compra
                    </button>
                    <p class="text-xs text-gray-500 mt-3">Ao prosseguir, você concorda com nossos Termos de Serviço e Política de Privacidade.</p>
                </div>
            </div>
        </div>
        </form>
    </div>

    <footer class="bg-gray-100 py-6 mt-12">
        <div class="container mx-auto px-4 text-center text-gray-600">
            <p>© 2025 Aqua Limpa - Todos os direitos reservados</p>
            <p class="mt-2 text-sm">Sistema especializado em soluções para a reutilização da água.</p>
        </div>
    </footer>

    <script>
        function openTab(tabName) {
            const tabs = document.querySelectorAll('.tab-content');
            tabs.forEach(tab => {
                tab.classList.remove('active');
            });
            document.getElementById(tabName).classList.add('active');
            
            const buttons = document.querySelectorAll('button[onclick^="openTab"]');
            buttons.forEach(btn => {
                btn.classList.remove('border-blue-600', 'text-blue-600');
                btn.classList.add('text-gray-500');
            });
            
            document.querySelector(`button[onclick="openTab('${tabName}')"]`).classList.add('border-blue-600', 'text-blue-600');
            document.querySelector(`button[onclick="openTab('${tabName}')"]`).classList.remove('text-gray-500');
            updateOrderSummary();
        }

        function updateQuantity(productId, change) {
            const input = document.getElementById(`${productId}-quantity`);
            let newValue = parseInt(input.value) + change;
            if (newValue < 0) newValue = 0;
            input.value = newValue;
            updateOrderSummary();
        }

        function updateOrderSummary() {
            const products = [
                { id: 'medidor', name: 'Medidor de Parâmetro AP-3000', price: 70, quantity: parseInt(document.getElementById('medidor-quantity').value) },
                { id: 'sensor', name: 'Sensor de Vazamento SV-500', price: 90, quantity: parseInt(document.getElementById('sensor-quantity').value) },
                { id: 'filtro', name: 'Filtrador de Água FA-700G', price: 80, quantity: parseInt(document.getElementById('filtro-quantity').value) }
            ];

            let summaryHTML = '';
            let subtotal = 0;
            let hasItems = false;

            products.forEach(product => {
                if (product.quantity > 0) {
                    hasItems = true;
                    const totalPrice = product.price * product.quantity;
                    subtotal += totalPrice;
                    summaryHTML += `
                        <div class="flex justify-between py-2 border-b border-gray-100">
                            <span>${product.name} x${product.quantity}</span>
                            <span>R$ ${totalPrice.toFixed(2).replace('.', ',')}</span>
                        </div>
                    `;
                }
            });

            if (!hasItems) {
                summaryHTML = '<div class="text-gray-600 italic">Selecione produtos para ver o resumo</div>';
            }

            document.getElementById('order-summary').innerHTML = summaryHTML;
            document.getElementById('subtotal').textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
            document.getElementById('total').textContent = `R$ ${subtotal.toFixed(2).replace('.', ',')}`;
        }

        // Inicializa o resumo do pedido
        updateOrderSummary();
    </script>
</body>
</html>
